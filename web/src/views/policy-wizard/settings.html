<div data-ng-controller="PolicySettingsCtrl as vm">

    <!-- POLICY NAME ALREADY EXISTS ERROR -->
    <div class="c-row c-row--separated-bottom angular-forms__error" data-ng-if="vm.error" data-qa="error-msg">
      <i class="c-icon icon-circle-cross"></i>
      <span translate="{{vm.errorText}}"></span>
    </div>

    <form class="c-form" name="vm.form" id="configurationForm" novalidate data-ng-class={'c-accordion-tool--items-hide-left':!(vm.compositionStatus.getConfigurationVisibility())}>
      <button class="c-button c-button--call-to-action-1 c-button--top-position" data-ng-click="vm.validateForm(wizard.onClickNextStep)"
              data-qa="policy-description-next-button" ng-if="vm.form.$dirty && vm.isUpdate">
        <i class="icon icon-circle-plus"></i>
        <span>{{"_SAVE_CHANGES_GO_INPUT_" | translate}}</span>
      </button>
      <form-field
        data-ng-repeat="properties in vm.template.basicSettings"
        class="c-form-gutter c-col c-col--vertical-top"
        data-ng-class="{'c-col--{{properties.col}}': properties.col}"
        data-ng-form-id="{{properties.propertyId}}"
        data-field="properties"
        data-model="vm.policy"
        data-form="vm.form"
        data-st-name="dataSource{{properties.propertyId}}Form"
        data-list-compressed = "true"
        data-qa="{{properties.qa}}">
      </form-field>
      <div class="c-form-group c-form-gutter" data-qa="fragment-details-mongoDb-hosts">
        <div class="c-form-control c-form-control--full-width">
          <div class="c-label c-label__subtitle c-label--margin-list c-col c-col--12">
                <span>
                  {{"_ADVANCED_SETTINGS_" | translate}}
                </span>
          </div>
          <div class="c-form-group c-form-group--list-compressed">
            <form-field
              data-ng-repeat="properties in vm.template.advancedSettings"
              data-ng-class="{'c-col c-col--{{properties.width}}': properties.width, 'c-form-gutter c-form-gutter__{{properties.position}} c-col--vertical-top': properties.position}"
              data-ng-form-id="{{properties.propertyId}}"
              data-field="properties"
              data-model="vm.policy"
              data-form="vm.form"
              data-st-name="dataSource{{properties.propertyId}}Form"
              data-list-compressed = "true"
              data-modal="true"
              data-qa="{{properties.qa}}">
            </form-field>
          </div>
        </div>
      </div>
      <footer class="c-row c-row--footer">
        <div class="c-col c-col--6 c-col--vertical-centered">
          <c-icon-link icon-class="'c-icon c-icon--is-clickable c-icon--call-to-action icon-help1'"
                       text="'_INPUT_WINDOW_NEW_HELP_' | translate" link-url="vm.helpLink"
                       data-qa="policy-description-help"></c-icon-link>
        </div>
     <div class="c-col c-col--12 c-col--vertical-centered c-col--to-right">
       <!--<button type="button" data-ng-class="{'c-button--call-to-action-1' : vm.nextStepEnabled, 'c-button--call-to-action-2': !vm.nextStepEnabled }" class="c-button c-button--to-right ng-scope c-button--left-margin" data-ng-click="vm.onClickNextStep(wizard.onClickNextStep)" data-qa="policy-next-step-button">
            <i class="icon icon-arrow-right"></i>
            <span class="ng-binding">{{"_GO_TO_INPUT_" | translate}}</span>
          </button>-->
        <button class="c-button c-button--call-to-action-1" data-ng-click="vm.validateForm(wizard.onClickNextStep)"
                data-qa="policy-description-next-button">
          <i class="icon icon-circle-plus"></i>
          <span ng-if="!vm.isUpdate">{{"_SAVE_SETTINGS_GO_INPUT_" | translate}}</span>
          <span ng-if="vm.isUpdate">{{"_SAVE_CHANGES_GO_INPUT_" | translate}}</span>
        </button>
      </div>
      </footer>
    </form>
</div>
